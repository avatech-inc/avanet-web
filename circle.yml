machine:
  node:
    version: 5.4.1

test:
  pre:
    - npm run test-server:
        background: true
    - sleep 5

deployment:
  master:
    branch: master
    commands:
      - npm run build
      - ./scripts/upload_source_maps.sh
      - rsync -avze ssh --delete ./build/ ubuntu@52.5.78.170:~/prod/
      - curl -X POST -H 'Content-type: application/json' --data '{"text": "Deployed master branch of avanet-web"}'  https://hooks.slack.com/services/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

  develop:
    branch: develop
    commands:
      - npm run build:develop
      - rsync -avze ssh --delete ./build/ ubuntu@52.5.78.170:~/develop/
      - curl -X POST -H 'Content-type: application/json' --data '{"text": "Deployed develop branch of avanet-web"}'  https://hooks.slack.com/services/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
